{"version":3,"file":"chardin.js","sourceRoot":"src/","sources":["chardin.ts"],"names":[],"mappings":"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","sourcesContent":["export class Chardin {\n\n  constructor(private element: HTMLElement, private idAttr: string = 'id') {\n    window.addEventListener('resize', () => this.refresh());\n  }\n\n  start = () => {\n    if (this._overlay_visible) {\n      return this;\n    }\n    this._add_overlay_layer();\n    let ref = this.element.querySelectorAll<HTMLElement>('*[data-intro]');\n    ref.forEach(el => {\n      if (this.isVisible(el)) {\n        this._show_element(el);\n      }\n    });\n    this.element.dispatchEvent(new Event('chardinJs:start'));\n  };\n\n  toggle = () => {\n    if (!this._overlay_visible) {\n      this.start();\n    } else {\n      this.stop();\n    }\n  };\n\n  refresh = () => {\n    if (this._overlay_visible) {\n      let ref = this.element.querySelectorAll<HTMLElement>('*[data-intro]');\n      let results = [];\n      ref.forEach(el => {\n        results.push(this._position_helper_layer(el));\n      });\n    }\n  };\n\n  stop = () => {\n    this.element.querySelectorAll<HTMLElement>(\".chardinjs-overlay\").forEach(e => this.fadeOutEffect(e));\n    this.element.querySelectorAll('.chardinjs-helper-layer').forEach(e => e.remove());\n    this.element.querySelectorAll('.chardinjs-show-element').forEach(e => e.classList.remove('chardinjs-show-element'));\n    this.element.querySelectorAll('.chardinjs-relative-position').forEach(e => e.classList.remove('chardinjs-relative-position'));\n    let ref = this.element.querySelectorAll<HTMLElement>('*[data-intro]');\n    ref.forEach(el => {\n      el.dataset.helper_layer = null;\n      el.dataset.tooltip_layer = null;\n    });\n    window.removeEventListener(\"keydown\", window.onkeydown, true);\n    this.element.dispatchEvent(new Event('chardinJs:stop'));\n  };\n\n  private fadeOutEffect = (element: HTMLElement) => {\n    const fadeEffect = setInterval(() => {\n      if (!element.style.opacity) {\n        element.style.opacity = '1';\n      }\n      let opacity = Number(element.style.opacity);\n      if (opacity > 0) {\n        element.style.opacity = String(opacity - 0.1);\n      } else {\n        clearInterval(fadeEffect);\n        element.remove();\n      }\n    }, 50);\n  };\n\n  private get _overlay_visible() {\n    return this.element.querySelectorAll('.chardinjs-overlay').length !== 0;\n  }\n\n  private _add_overlay_layer = () => {\n    if (this._overlay_visible) {\n      return false;\n    }\n    let overlay_layer = document.createElement(\"div\");\n    let styleText = \"\";\n    overlay_layer.className = \"chardinjs-overlay\";\n    if (this.element.tagName === \"BODY\") {\n      styleText += \"top: 0;bottom: 0; left: 0;right: 0;position: fixed;\";\n      overlay_layer.setAttribute(\"style\", styleText);\n    } else {\n      let element_position = this._get_offset(this.element);\n      if (element_position) {\n        styleText += \"width: \" + element_position.width + \"px; height:\" + element_position.height + \"px; top:\" + element_position.top + \"px;left: \" + element_position.left + \"px;\";\n        overlay_layer.setAttribute(\"style\", styleText);\n      }\n    }\n    this.element.appendChild(overlay_layer);\n    overlay_layer.onclick = (_this => {\n      return () => _this.stop();\n    })(this);\n    return setTimeout(() => {\n      styleText += \"opacity: .8;opacity: .8;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)';filter: alpha(opacity=80);\";\n      return overlay_layer.setAttribute(\"style\", styleText);\n    }, 10);\n  };\n\n  private _get_position = (element: HTMLElement): string => element.getAttribute('data-position') || 'bottom';\n\n  private _place_tooltip = (element: HTMLElement, tooltip_layer = this.element.querySelector<HTMLElement>('div.chardinjs-tooltip')) => {\n    let tooltip_layer_position = this._get_offset(tooltip_layer);\n    tooltip_layer.style.top = null;\n    tooltip_layer.style.right = null;\n    tooltip_layer.style.bottom = null;\n    tooltip_layer.style.left = null;\n    switch (this._get_position(element)) {\n      case \"top\":\n      case \"bottom\": {\n        let target_element_position = this._get_offset(element);\n        let target_width = target_element_position.width;\n        tooltip_layer.style.left = ((target_width / 2) - (tooltip_layer_position.width / 2)) + \"px\";\n        break;\n      }\n      case \"left\":\n      case \"right\": {\n        let target_element_position = this._get_offset(element);\n        let target_height = target_element_position.height;\n        tooltip_layer.style.top = ((target_height / 2) - (tooltip_layer_position.height / 2)) + \"px\";\n      }\n    }\n    switch (this._get_position(element)) {\n      case \"left\":\n        return tooltip_layer.style.left = \"-\" + (tooltip_layer_position.width - 34) + \"px\";\n      case \"right\":\n        return tooltip_layer.style.right = \"-\" + (tooltip_layer_position.width - 34) + \"px\";\n      case \"bottom\":\n        return tooltip_layer.style.bottom = \"-\" + tooltip_layer_position.height + \"px\";\n      case \"top\":\n        return tooltip_layer.style.top = \"-\" + tooltip_layer_position.height + \"px\";\n    }\n  };\n\n  private _position_helper_layer = (element: HTMLElement, helper_layer = this.element.querySelector<HTMLElement>(`div.chardinjs-helper-layer[data-id='${this.getId(element)}']`)) => {\n    let element_position = this._get_offset(element);\n    if (this.isVisible(element) && helper_layer) {\n      return helper_layer.setAttribute(\"style\", \"display: block; width: \" + element_position.width + \"px; height:\" + element_position.height + \"px; top:\" + element_position.top + \"px; left: \" + element_position.left + \"px;\");\n    }\n    if (this.isVisible(element) && !helper_layer) {\n      return this._show_element(element);\n    }\n    if (!this.isVisible(element) && helper_layer) {\n      return helper_layer.setAttribute(\"style\", \"display: none; width: \" + element_position.width + \"px; height:\" + element_position.height + \"px; top:\" + element_position.top + \"px; left: \" + element_position.left + \"px;\");\n    }\n  };\n\n  private isHidden = (element: HTMLElement): boolean => {\n    const width = element.offsetWidth,\n        height = element.offsetHeight;\n\n    return (width === 0 && height === 0) ||\n        ((element.style && element.style.display) || document.defaultView.getComputedStyle(element, 'display')) === \"none\";\n  };\n\n  private isVisible = (element: HTMLElement): boolean => !this.isHidden(element);\n\n  private _show_element = (element: HTMLElement) => {\n    let helper_layer = document.createElement(\"div\");\n    let tooltip_layer = document.createElement(\"div\");\n    let id = this.getId(element);\n    if (id) {\n      helper_layer.setAttribute(\"data-id\", id);\n    }\n    helper_layer.className = \"chardinjs-helper-layer chardinjs-\" + (this._get_position(element));\n    this._position_helper_layer(element, helper_layer);\n    this.element.appendChild(helper_layer);\n    tooltip_layer.className = \"chardinjs-tooltip chardinjs-\" + (this._get_position(element));\n    tooltip_layer.innerHTML = \"<div class='chardinjs-tooltiptext'>\" + (element.getAttribute('data-intro')) + \"</div>\";\n    helper_layer.appendChild(tooltip_layer);\n    this._place_tooltip(element, tooltip_layer);\n    element.className += \" chardinjs-show-element\";\n    let current_element_position = \"\";\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      current_element_position = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"position\");\n    }\n    current_element_position = current_element_position.toLowerCase();\n    if (current_element_position !== \"absolute\" && current_element_position !== \"relative\") {\n      return element.className += \" chardinjs-relative-position\";\n    }\n  };\n\n  private _get_offset = (element: HTMLElement): ClientRect => {\n    let element_position = {\n      width: element.offsetWidth,\n      height: element.offsetHeight,\n      top: 0,\n      left: 0\n    };\n    element_position.top = element.getBoundingClientRect().top;\n    element_position.left = element.getBoundingClientRect().left;\n    return element.getBoundingClientRect();\n  };\n\n  private getId = (element: HTMLElement): string | undefined => {\n    if (element.id) {\n      return element.id;\n    } else if (element.hasAttribute(this.idAttr)) {\n      return element.getAttribute(this.idAttr);\n    } else {\n      return undefined;\n    }\n  };\n}\n"]}